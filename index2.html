<!DOCTYPE html>
<html lang="en">

<head>
    <title>Rotate Ship</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/style.css" rel="stylesheet">
    <script src="./fire.js"></script>
    <script src="./ship.js"></script>
    <script src="./input.js"></script>
</head>

<body>
    <canvas id='canvas' style="border: 1px solid #ccc" width="700" height="500" tabindex="1">
    </canvas>
    <script>
        var canvas = document.getElementById('canvas')
        var context = canvas.getContext('2d');
        var mouseX, mouseY;

        var ship = new Ship(350, 250)
        var input = new Input();

        canvas.addEventListener('mousemove', mouseMove);
        canvas.addEventListener('mousedown', mouseDown);
        canvas.addEventListener('keydown', keyDown);
        canvas.addEventListener('keyup', keyUp);

        function mouseMove(event) {
            mouseX = event.x;
            mouseY = event.y;
        }

        function mouseDown(event) {
            ship.fire();
        }

        function keyDown(event) {
            input.set(event, true);
        }

        function keyUp(event) {
            input.set(event, false);
        }

        function gameLoop() {
            context.clearRect(0, 0, canvas.width, canvas.height);
            ship.draw();
            ship.update(input, mouseX, mouseY);
        }

        setInterval(gameLoop, 20);
    </script>
</body>

</html>